services:
  claude-code:
    build:
      context: .
      args:
        HOST_UID: ${HOST_UID:-1000}
        HOST_GID: ${HOST_GID:-1000}
    container_name: claude-code
    volumes:
      - .:/projects/strata
      - ./claude.local/.claude:/home/developer/.claude
      - ./claude.local/.claude.json:/home/developer/.claude.json
      - ./claude.local/.bash_history:/home/developer/.bash_history
      - ~/.claude/CLAUDE.md:/home/developer/.claude/CLAUDE.md
      - ~/.claude/.credentials.json:/home/developer/.claude/.credentials.json
      - ~/.config/git:/home/developer/.config/git
      - ~/.config/gh:/home/developer/.config/gh
      - ~/.ssh:/home/developer/.ssh:ro
      - ./claude.local/.npm-global:/home/developer/.npm-global
      - ./claude.local/.local:/home/developer/.local
    stdin_open: true
    tty: true
    working_dir: /projects/strata
    command: bash -c "/projects/strata/scripts/start-claude-code.sh"
